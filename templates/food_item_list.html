{% extends "layout.html" %}
{% block title %}History{% endblock %}
{% block content %}
    <!-- Begin Page Content -->

    <style>
        .converter-page__title[data-v-04b06bb4] {
            color: #e1791e;
            font-weight: 900;
            font-size: 3em;
            line-height: 58px;
            text-align: center;
            margin-top: 50px;
            overflow-x: auto;
            overflow-y: hidden;
            height: auto;
        }
    </style>

    <div class="container-fluid">

        <!-- Page Heading -->
        <div>
            <h1 data-v-04b06bb4="" class="h1 converter-page__title">
                History
            </h1>
        </div>

        <!-- Filter Dropdowns -->
        <div class="row">
            <div class="col-md-4">
                <select id="categoryFilter" class="form-control" onchange="filterTable()">
                    <option value="">Select Category</option>
                    <option value="Weight Gain">Weight Gain</option>
                    <option value="Weight Loss">Weight Loss</option>
                </select>
            </div>
            <div class="col-md-4">
                <select id="foodTypeFilter" class="form-control" onchange="filterTable()">
                    <option value="">Select Food Type</option>
                    <option value="Vegetarian">Vegetarian</option>
                    <option value="Non-Vegetarian">Non-Vegetarian</option>
                </select>
            </div>
            <div class="col-md-4">
                <select id="mealTimeFilter" class="form-control" onchange="filterTable()">
                    <option value="">Select Meal Time</option>
                    <option value="Lunch">Lunch</option>
                    <option value="Breakfast">Breakfast</option>
                    <option value="Dinner">Dinner</option>
                </select>
            </div>
        </div><br/>

        <div class="row">
            <div class="col-md-12">
                <table id="dataTable" class="table table-bordered" style="background-color:white;">
                    <thead>
                      <tr>
                        <th>Index</th>
                        <th>Category</th>
                        <th>Item Name</th>
                        <th>Food Type</th>
                        <th> Meal Time</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for data in all_data %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ data['Category'] }}</td>
                            <td>{{ data['Item Name'] }}</td>
                            <td>{{ data['Food Type'] }}</td>
                            <td>{{ data['Meal Time']}}</td>
                        </tr>
                      {% endfor %}
                    </tbody>
                  </table>
            </div>
        </div><br/>
    </div>
    <!-- /.container-fluid -->

    <script>
        function filterTable() {
            var categoryFilter = document.getElementById("categoryFilter").value.toLowerCase();
            var foodTypeFilter = document.getElementById("foodTypeFilter").value.toLowerCase();
            var mealTimeFilter = document.getElementById("mealTimeFilter").value.toLowerCase();

            var table = document.getElementById("dataTable");
            var trs = table.getElementsByTagName("tr");

            for (var i = 1; i < trs.length; i++) {
                var category = trs[i].getElementsByTagName("td")[1].innerText.toLowerCase();
                var foodType = trs[i].getElementsByTagName("td")[3].innerText.toLowerCase();
                var mealTime = trs[i].getElementsByTagName("td")[4].innerText.toLowerCase();

                if ((category.indexOf(categoryFilter) > -1 || categoryFilter === "") &&
                    (foodType.indexOf(foodTypeFilter) > -1 || foodTypeFilter === "") &&
                    (mealTime.indexOf(mealTimeFilter) > -1 || mealTimeFilter === "")) {
                    trs[i].style.display = "";
                } else {
                    trs[i].style.display = "none";
                }
            }
        }
    </script>

{% endblock %}
